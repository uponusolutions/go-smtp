<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# smtp

```go
import "github.com/uponusolutions/go-smtp"
```

Package smtp implements the Simple Mail Transfer Protocol as defined in RFC 5321.

It also implements the following extensions:

- 8BITMIME \(RFC 1652\)
- AUTH \(RFC 2554\)
- STARTTLS \(RFC 3207\)
- ENHANCEDSTATUSCODES \(RFC 2034\)
- SMTPUTF8 \(RFC 6531\)
- REQUIRETLS \(RFC 8689\)
- CHUNKING \(RFC 3030\)
- BINARYMIME \(RFC 3030\)
- DSN \(RFC 3461, RFC 6533\)

LMTP \(RFC 2033\) is also supported.

Additional extensions may be handled by other packages.

## Index

- [Variables](<#variables>)
- [func ParseBATV\(src string\) string](<#ParseBATV>)
- [func ParseSRS\(src string\) string](<#ParseSRS>)
- [func ParseSender\(src string\) string](<#ParseSender>)
- [func Timeout\(conn net.Conn, duration time.Duration\) func\(\)](<#Timeout>)
- [type BodyType](<#BodyType>)
- [type DSNAddressType](<#DSNAddressType>)
- [type DSNNotify](<#DSNNotify>)
- [type DSNReturn](<#DSNReturn>)
- [type EnhancedCode](<#EnhancedCode>)
- [type MailOptions](<#MailOptions>)
- [type RcptOptions](<#RcptOptions>)
- [type Status](<#Status>)
  - [func NewStatus\(code int, enhCode EnhancedCode, msg string\) \*Status](<#NewStatus>)
  - [func \(err \*Status\) Error\(\) string](<#Status.Error>)
  - [func \(err \*Status\) Permanent\(\) bool](<#Status.Permanent>)
  - [func \(err \*Status\) Positive\(\) bool](<#Status.Positive>)
  - [func \(err \*Status\) Temporary\(\) bool](<#Status.Temporary>)
- [type VrfyOptions](<#VrfyOptions>)


## Variables

<a name="Reset"></a>

```go
var (
    // Reset is returned by Reader passed to Data function if client does not
    // send another BDAT command and instead issues RSET command.
    Reset = &Status{
        Code:         250,
        EnhancedCode: EnhancedCode{2, 0, 0},
        Message:      "Session reset",
    }
    // VRFY default return.
    VRFY = &Status{
        Code:         252,
        EnhancedCode: EnhancedCode{2, 5, 0},
        Message:      "Cannot VRFY user, but will accept message",
    }
    // Noop default return.
    Noop = &Status{
        Code:         250,
        EnhancedCode: EnhancedCode{2, 0, 0},
        Message:      "I have successfully done nothing",
    }
    // Quit is returned by Reader passed to Data function if client does not
    // send another BDAT command and instead issues QUIT command.
    Quit = &Status{
        Code:         221,
        EnhancedCode: EnhancedCode{2, 0, 0},
        Message:      "Bye",
    }
    // ErrConnection is returned if a connection error occurs.
    ErrConnection = &Status{
        Code:         421,
        EnhancedCode: EnhancedCode{4, 4, 0},
        Message:      "Connection error, sorry",
    }
    // ErrDataTooLarge is returned if the maximum message size is exceeded.
    ErrDataTooLarge = &Status{
        Code:         552,
        EnhancedCode: EnhancedCode{5, 3, 4},
        Message:      "Maximum message size exceeded",
    }
    // ErrAuthFailed is returned if the authentication failed.
    ErrAuthFailed = &Status{
        Code:         535,
        EnhancedCode: EnhancedCode{5, 7, 8},
        Message:      "Authentication failed",
    }
    // ErrAuthRequired is returned if the authentication is required.
    ErrAuthRequired = &Status{
        Code:         502,
        EnhancedCode: EnhancedCode{5, 7, 0},
        Message:      "Please authenticate first",
    }
    // ErrAuthUnsupported is returned if the authentication is not supported.
    ErrAuthUnsupported = &Status{
        Code:         502,
        EnhancedCode: EnhancedCode{5, 7, 0},
        Message:      "Authentication not supported",
    }
    // ErrAuthUnknownMechanism is returned if the authentication unsupported.
    ErrAuthUnknownMechanism = &Status{
        Code:         504,
        EnhancedCode: EnhancedCode{5, 7, 4},
        Message:      "Unsupported authentication mechanism",
    }
    // ErrNoRecipients is returned if no recipients are set.
    ErrNoRecipients = &Status{
        Code:         502,
        EnhancedCode: EnhancedCode{5, 5, 1},
        Message:      "Missing RCPT TO command.",
    }
)
```

<a name="EnhancedCodeNotSet"></a>EnhancedCodeNotSet is a nil value of EnhancedCode field in smtp, used to indicate that backend failed to provide enhanced status code. X.0.0 will be used \(X is derived from error code\).

```go
var EnhancedCodeNotSet = EnhancedCode{0, 0, 0}
```

<a name="NoEnhancedCode"></a>NoEnhancedCode is used to indicate that enhanced error code should not be included in response.

Note that RFC 2034 requires an enhanced code to be included in all 2xx, 4xx and 5xx responses. This constant is exported for use by extensions, you should probably use EnhancedCodeNotSet instead.

```go
var NoEnhancedCode = EnhancedCode{-1, -1, -1}
```

<a name="ParseBATV"></a>
## func ParseBATV

```go
func ParseBATV(src string) string
```

ParseBATV parses src to extract a BATV address. When BATV extration is not possible/needed src is returned.

<a name="ParseSRS"></a>
## func ParseSRS

```go
func ParseSRS(src string) string
```

ParseSRS parses src to extract the forwarding sender from SRS \(Exchange Online\). When SRS extration is not possible/needed src is returned.

<a name="ParseSender"></a>
## func ParseSender

```go
func ParseSender(src string) string
```

ParseSender combines ParseSRS and ParseBATV.

<a name="Timeout"></a>
## func Timeout

```go
func Timeout(conn net.Conn, duration time.Duration) func()
```

Timeout sets a timeout by deadline to the connection and relieves it when returning func is used.

<a name="BodyType"></a>
## type BodyType

BodyType describes the type of the body.

```go
type BodyType string
```

<a name="Body7Bit"></a>

```go
const (
    // Body7Bit means the body type is 7BIT
    Body7Bit BodyType = "7BIT"
    // Body8BitMIME means the body type is 8BITMIME
    Body8BitMIME BodyType = "8BITMIME"
    // BodyBinaryMIME means the body type is BINARYMIME
    BodyBinaryMIME BodyType = "BINARYMIME"
)
```

<a name="DSNAddressType"></a>
## type DSNAddressType

DSNAddressType describes the DSN address type.

```go
type DSNAddressType string
```

<a name="DSNAddressTypeRFC822"></a>

```go
const (
    // DSNAddressTypeRFC822 means that the DSN address type is RFC822.
    DSNAddressTypeRFC822 DSNAddressType = "RFC822"
    // DSNAddressTypeUTF8 means that the DSN address type is UTF-8.
    DSNAddressTypeUTF8 DSNAddressType = "UTF-8"
)
```

<a name="DSNNotify"></a>
## type DSNNotify

DSNNotify describes the DSN notify.

```go
type DSNNotify string
```

<a name="DSNNotifyNever"></a>

```go
const (
    // DSNNotifyNever sets the DSN notify to never.
    DSNNotifyNever DSNNotify = "NEVER"
    // DSNNotifyDelayed sets the DSN notify to delay.
    DSNNotifyDelayed DSNNotify = "DELAY"
    // DSNNotifyFailure sets the DSN notify to failure.
    DSNNotifyFailure DSNNotify = "FAILURE"
    // DSNNotifySuccess sets the DSN notify to succes.
    DSNNotifySuccess DSNNotify = "SUCCESS"
)
```

<a name="DSNReturn"></a>
## type DSNReturn

DSNReturn describes the DSN return.

```go
type DSNReturn string
```

<a name="DSNReturnFull"></a>

```go
const (
    // DSNReturnFull means DNS return is full.
    DSNReturnFull DSNReturn = "FULL"
    // DSNReturnHeaders means DNS return is hdrs.
    DSNReturnHeaders DSNReturn = "HDRS"
)
```

<a name="EnhancedCode"></a>
## type EnhancedCode

EnhancedCode is the SMTP enhanced code

```go
type EnhancedCode [3]int
```

<a name="MailOptions"></a>
## type MailOptions

MailOptions contains parameters for the MAIL command.

```go
type MailOptions struct {
    // Value of BODY= argument, 7BIT, 8BITMIME or BINARYMIME.
    Body BodyType

    // Size of the body. Can be 0 if not specified by client.
    Size int64

    // TLS is required for the message transmission.
    //
    // The message should be rejected if it can't be transmitted
    // with TLS.
    RequireTLS bool

    // The message envelope or message header contains UTF-8-encoded strings.
    // This flag is set by SMTPUTF8-aware (RFC 6531) client.
    UTF8 bool

    // Value of RET= argument, FULL or HDRS.
    Return DSNReturn

    // Envelope identifier set by the client.
    EnvelopeID string

    // Accepted Domain from Exchange Online, e.g. from OutgoingConnector
    XOORG *string

    // The authorization identity asserted by the message sender in decoded
    // form with angle brackets stripped.
    //
    // nil value indicates missing AUTH, non-nil empty string indicates
    // AUTH=<>.
    //
    // Defined in RFC 4954.
    Auth *string
}
```

<a name="RcptOptions"></a>
## type RcptOptions

RcptOptions contains parameters for the RCPT command.

```go
type RcptOptions struct {
    // Value of NOTIFY= argument, NEVER or a combination of either of
    // DELAY, FAILURE, SUCCESS.
    Notify []DSNNotify

    // Original recipient set by client.
    OriginalRecipientType DSNAddressType
    OriginalRecipient     string
}
```

<a name="Status"></a>
## type Status

Status specifies the error code, enhanced error code \(if any\) and message returned by the server.

```go
type Status struct {
    Code         int
    EnhancedCode EnhancedCode
    Message      string
}
```

<a name="NewStatus"></a>
### func NewStatus

```go
func NewStatus(code int, enhCode EnhancedCode, msg string) *Status
```

NewStatus creates a new status.

<a name="Status.Error"></a>
### func \(\*Status\) Error

```go
func (err *Status) Error() string
```

Error returns a error string.

<a name="Status.Permanent"></a>
### func \(\*Status\) Permanent

```go
func (err *Status) Permanent() bool
```

Permanent returns true if the status code is 5xx.

<a name="Status.Positive"></a>
### func \(\*Status\) Positive

```go
func (err *Status) Positive() bool
```

Positive returns true if the status code is 2xx.

<a name="Status.Temporary"></a>
### func \(\*Status\) Temporary

```go
func (err *Status) Temporary() bool
```

Temporary returns true if the status code is 4xx.

<a name="VrfyOptions"></a>
## type VrfyOptions

VrfyOptions contains parameters for the VRFY command.

```go
type VrfyOptions struct {
    // The message envelope or message header contains UTF-8-encoded strings.
    // This flag is set by SMTPUTF8-aware (RFC 6531) client.
    UTF8 bool
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->